<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.dong.board.BoardDAO">

  <!-- 게시글 목록 -->
  <select id="listAll" parameterType="map" resultType="kr.co.dong.board.BoardDTO">
    SELECT id, title, content, writer, regdate, hit, notice
    FROM board
    ORDER BY id DESC
</select>

  <!-- 게시글 등록 -->
  <insert id="insert" parameterType="kr.co.dong.board.BoardDTO">
    INSERT INTO board (title, content, writer, regdate, hit)
    VALUES (#{title}, #{content}, #{writer}, NOW(), 0)
  </insert>

  <!-- 게시글 상세 -->
  <select id="detail" parameterType="int" resultType="kr.co.dong.board.BoardDTO">
    SELECT id, title, content, writer, regdate, hit
    FROM board
    WHERE id = #{id}
  </select>

  <!-- 조회수 증가 -->
  <update id="increaseHit" parameterType="int">
    UPDATE board SET hit = hit + 1 WHERE id = #{id}
  </update>

  <!-- 게시글 삭제 -->
  <delete id="delete" parameterType="int">
    DELETE FROM board WHERE id = #{id}
  </delete>

</mapper>
